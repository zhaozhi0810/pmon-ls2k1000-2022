rm -rf *.o zlib_gzip zloader pmon.bin.c gzrom gzrom.bin gzram  initmips.c pmon.bin.gz zlib_deflate/*.o zlib_inflate/*.o zlib_gzrom zlib_gzrom.bin
rm -f ../Targets/LS2K-hj20004/compile/ls2k/start.o
gcc  -DSTARTADDR=0xffffffff8f010000 -DOUT_FORMAT=\""elf32-tradlittlemips"\" -DOUT_ARCH=mips -Umips -E -P ld.script.S  > ../Targets/LS2K-hj20004/conf/ld.script
make -C ../Targets/LS2K-hj20004/compile/ls2k/
make[1]: Entering directory '/home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k'
/home/jc/ls2a1000/gcc-4.4.0-pmon/bin/mipsel-linux-gcc -mabi=32   -mno-abicalls -fno-pic -D_LOCORE -G 0 -mips3 	-I. -I/home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k/../../../../include -I./machine -I/home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k/../../../.. -I/home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k/../../../../sys/arch/mips/include -I/home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k/../../../../sys -I/home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k/../../../../Targets/LS2K-hj20004 -I/home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k -I -nostdinc -fno-strict-aliasing -fno-pic -I/home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k/../../../../x86emu/int10/x86emu/include -I/home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k/../../../../x86emu/int10/x86emu/src/x86emu/x86emu  -DVGAROM_IN_BIOS -DLOONGSON_2K -DBOOT_PARAM -DVRAM_SIZE="0x10" -DSYSTYPE="\"FCR\"" -DTARGETNAME="\"FCR\"" -DLS2K_STR -DBONITOEL -DDEVBD2E -DMIPS -DINET -DLS3_HT -Dloongson3A3 -DLSMC_2 -DDDR3_DIMM -DLOONGSON_GMAC -DDTB -DINTERFACE_3A780E -DCONS_BAUD="B115200" -DMY40IO -DMY61IO -DVGA_BASE="0xb0000000" -DVGA_NO_ROM -DNOPCINAMES -DFB_XSIZE="0x400" -DFB_YSIZE="0x300" -DCONFIG_VIDEO_16BPP -DNOSNOOP -DINTERNAL_RTC -DHAVE_NVENV -DHAVE_LOGO -DUSE_SUPERIO_UART -DAUTOLOAD -DCONFIG_CACHE_64K_4WAY -DNVRAM_IN_FLASH -DSET_DDR_FREQ -DIDE_DMA -DFOR_GXEMUL -DFLOATINGPT -DCOM3_BASE_ADDR="0xbfe001e0" -DINPUT_FROM_BOTH -DOUTPUT_TO_BOTH   -DFB_COLOR_BITS=16  -D_KERNEL -D__OpenBSD__ -DPMON -D__PMON__ -mmemcpy -mno-abicalls -fno-builtin -c /home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k/../../../../Targets/LS2K-hj20004/ls2k/start.S
mkdir -p /home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k/lib/libc 
making sure the libc library is up to date...
make[2]: Entering directory '/home/jc/ls2a1000/pmon-loongson3-hj20004/lib/libc'
make[2]: '/home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k/lib/libc/libc.a' is up to date.
make[2]: Leaving directory '/home/jc/ls2a1000/pmon-loongson3-hj20004/lib/libc'
mkdir -p /home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k/lib/libm 
making sure the libm library is up to date...
make[2]: Entering directory '/home/jc/ls2a1000/pmon-loongson3-hj20004/lib/libm'
make[2]: '/home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k/lib/libm/libm.a' is up to date.
make[2]: Leaving directory '/home/jc/ls2a1000/pmon-loongson3-hj20004/lib/libm'
mkdir -p /home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k/lib/libz 
making sure the libz library is up to date...
make[2]: Entering directory '/home/jc/ls2a1000/pmon-loongson3-hj20004/lib/libz'
make[2]: '/home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k/lib/libz/libz.a' is up to date.
make[2]: Leaving directory '/home/jc/ls2a1000/pmon-loongson3-hj20004/lib/libz'
sh /home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k/../../../../conf/newvers.sh
/home/jc/ls2a1000/gcc-4.4.0-pmon/bin/mipsel-linux-gcc -mabi=32   -mno-abicalls -fno-pic  -Wall -Wstrict-prototypes -Wno-uninitialized -Wno-format -Wno-main -O2 -G 0 -mips3 	-I. -I/home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k/../../../../include -I./machine -I/home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k/../../../.. -I/home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k/../../../../sys/arch/mips/include -I/home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k/../../../../sys -I/home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k/../../../../Targets/LS2K-hj20004 -I/home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k -I -nostdinc -fno-strict-aliasing -fno-pic -I/home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k/../../../../x86emu/int10/x86emu/include -I/home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k/../../../../x86emu/int10/x86emu/src/x86emu/x86emu  -DVGAROM_IN_BIOS -DLOONGSON_2K -DBOOT_PARAM -DVRAM_SIZE="0x10" -DSYSTYPE="\"FCR\"" -DTARGETNAME="\"FCR\"" -DLS2K_STR -DBONITOEL -DDEVBD2E -DMIPS -DINET -DLS3_HT -Dloongson3A3 -DLSMC_2 -DDDR3_DIMM -DLOONGSON_GMAC -DDTB -DINTERFACE_3A780E -DCONS_BAUD="B115200" -DMY40IO -DMY61IO -DVGA_BASE="0xb0000000" -DVGA_NO_ROM -DNOPCINAMES -DFB_XSIZE="0x400" -DFB_YSIZE="0x300" -DCONFIG_VIDEO_16BPP -DNOSNOOP -DINTERNAL_RTC -DHAVE_NVENV -DHAVE_LOGO -DUSE_SUPERIO_UART -DAUTOLOAD -DCONFIG_CACHE_64K_4WAY -DNVRAM_IN_FLASH -DSET_DDR_FREQ -DIDE_DMA -DFOR_GXEMUL -DFLOATINGPT -DCOM3_BASE_ADDR="0xbfe001e0" -DINPUT_FROM_BOTH -DOUTPUT_TO_BOTH   -DFB_COLOR_BITS=16  -D_KERNEL -D__OpenBSD__ -DPMON -D__PMON__ -mmemcpy -mno-abicalls -fno-builtin  -c vers.c
rm -f pmon
/home/jc/ls2a1000/gcc-4.4.0-pmon/bin/mipsel-linux-ld -m elf32ltsmip -G 0 -static -n -nostdlib -N -G 0 -T../../conf/ld.script -e start -S -o pmon start.o crtbegin.o param.o ioconf.o ri.o wdc.o mainbus.o pcibr.o if.o if_ethersubr.o if_loop.o if_media.o radix.o raw_cb.o raw_usrreq.o route.o rtsock.o if_ether.o in.o in_cksum.o in_pcb.o in_proto.o ip_icmp.o ip_id.o ip_input.o ip_output.o raw_ip.o udp_usrreq.o tcp_debug.o tcp_input.o tcp_output.o tcp_subr.o tcp_timer.o tcp_usrreq.o kern_clock.o kern_misc.o kern_synch.o uipc_domain.o uipc_socket2.o kern_descrip.o kern_proc.o kern_syscall.o sys_generic.o subr_autoconf.o uipc_mbuf.o uipc_syscalls.o init_main.o kern_malloc.o kern_sig.o kern_time.o sys_socket.o uipc_socket.o bus_dma.o smbios.o uuid.o boot.o call.o mycmd.o xyzModem.o crc16.o sysinfo.o newmt.o setup.o display.o cmdtable.o debuggercmds.o devls.o cmd_go.o hist.o ifaddr.o oload.o load.o cmd_grub.o memcmds.o memtst.o miscmds.o pcicmds.o pflash.o cmd_env.o transp.o sym.o shellcmds.o cmd_main.o window.o bootparam.o about.o autoconf.o callvec.o cmdparser.o debugger.o exception.o main.o more.o rsa.o sbrk.o env.o reset.o ramfile.o termio.o socket.o gzip.o devfs.o diskfs.o fatfs.o ext2fs.o dev_part.o loadfn.o exec.o exec_bin.o exec_elf.o exec_elf64.o exec_srec.o netio.o bootp.o ifconfig.o ping.o tftplib.o httplib.o debug.o decode.o fpu.o ops.o ops2.o prim_ops.o sys.o generic.o helper_exec.o helper_mem.o xf86int10.o xf86x86emu.o rs690_struct.o vesafb.o cfb_console.o kbd.o vgacon.o generic_poll.o flash.o flashdev.o flash_amd.o flash_int.o flash_sst.o flash_spi.o ns16550.o machdep.o mips_machdep.o disassemble.o mips.o cache.o usb.o usb_storage.o part.o usb-ohci.o usb_kbd.o cmd_usb.o exec_txt.o menulist2f.o boot_cfg.o bootkernel.o fdt.o fdt_ro.o fdt_rw.o fdt_strerror.o fdt_wip.o password.o md5.o install.o save_ddrparam.o showwindows.o w83527_fan.o pci_machdep.o tgt_machdep.o dc.o ls2k_pci.o localbus.o spi_w.o nand_opt.o set_cpu_ddr_freq.o set_vol.o rtc.o eeprom.o load_dtb.o signal_test.o slt.o synopGMAC_Dev.o synopGMAC_network_interface.o synopGMAC_pci_bus_interface.o synopGMAC_plat.o if_gmac.o mii.o pciconf.o pci_map.o pci.o e1000_i210.o e1000_82575.o e1000_mac.o e1000_phy.o e1000_manage.o e1000_api.o e1000_mbx.o e1000_nvm.o igb_main.o pciide.o ppb.o pcidevs.o ahci.o ahcisata.o ahci-sd.o ahci-cdrom.o wd.o ata_wdc.o ata.o /home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k/lib/libc/libc.a /home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k/lib/libm/libm.a /home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k/lib/libz/libz.a crtend.o vers.o
   text	   data	    bss	    dec	    hex	filename
1058180	1189864	 241092	2489136	 25fb30	pmon
make[1]: Leaving directory '/home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k'
cp ../Targets/LS2K-hj20004/compile/ls2k/start.o .
gzip ../Targets/LS2K-hj20004/compile/ls2k/pmon.bin -c > pmon.bin.gz
./bin2c pmon.bin.gz pmon.bin.c biosdata
./genrom ../Targets/LS2K-hj20004/compile/ls2k/pmon > initmips.c
/home/jc/ls2a1000/gcc-4.4.0-pmon/bin/mipsel-linux-gcc -mabi=32   -mno-abicalls -fno-pic -c zloader.c -mips3 -DMEMSIZE=128
gcc  -DSTARTADDR=0xffffffff8f900000 -DOUT_FORMAT=\""elf32-tradlittlemips"\" -DOUT_ARCH=mips -Umips -E -P ld.script.S  > ld.script
/home/jc/ls2a1000/gcc-4.4.0-pmon/bin/mipsel-linux-ld  -m elf32ltsmip -G 0 -static -n -nostdlib -T ld.script -e start -o gzrom start.o zloader.o 
/home/jc/ls2a1000/gcc-4.4.0-pmon/bin/mipsel-linux-objcopy -O binary gzrom gzrom.bin
make -C ../Targets/LS2K-hj20004/compile/ls2k/ DTB_O=`pwd`/LS2K-hj20004.dtb.i DTB_I=`pwd`/../Targets/LS2K-hj20004/conf/LS2K-hj20004.dts dtb
make[1]: Entering directory '/home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k'
/home/jc/ls2a1000/gcc-4.4.0-pmon/bin/mipsel-linux-gcc -mabi=32   -mno-abicalls -fno-pic -D_LOCORE -G 0 -mips3 	-I. -I/home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k/../../../../include -I./machine -I/home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k/../../../.. -I/home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k/../../../../sys/arch/mips/include -I/home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k/../../../../sys -I/home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k/../../../../Targets/LS2K-hj20004 -I/home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k -I -nostdinc -fno-strict-aliasing -fno-pic -I/home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k/../../../../x86emu/int10/x86emu/include -I/home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k/../../../../x86emu/int10/x86emu/src/x86emu/x86emu  -DVGAROM_IN_BIOS -DLOONGSON_2K -DBOOT_PARAM -DVRAM_SIZE="0x10" -DSYSTYPE="\"FCR\"" -DTARGETNAME="\"FCR\"" -DLS2K_STR -DBONITOEL -DDEVBD2E -DMIPS -DINET -DLS3_HT -Dloongson3A3 -DLSMC_2 -DDDR3_DIMM -DLOONGSON_GMAC -DDTB -DINTERFACE_3A780E -DCONS_BAUD="B115200" -DMY40IO -DMY61IO -DVGA_BASE="0xb0000000" -DVGA_NO_ROM -DNOPCINAMES -DFB_XSIZE="0x400" -DFB_YSIZE="0x300" -DCONFIG_VIDEO_16BPP -DNOSNOOP -DINTERNAL_RTC -DHAVE_NVENV -DHAVE_LOGO -DUSE_SUPERIO_UART -DAUTOLOAD -DCONFIG_CACHE_64K_4WAY -DNVRAM_IN_FLASH -DSET_DDR_FREQ -DIDE_DMA -DFOR_GXEMUL -DFLOATINGPT -DCOM3_BASE_ADDR="0xbfe001e0" -DINPUT_FROM_BOTH -DOUTPUT_TO_BOTH   -DFB_COLOR_BITS=16  -D_KERNEL -D__OpenBSD__ -DPMON -D__PMON__ -mmemcpy -mno-abicalls -fno-builtin  -E  -D__ASSEMBLY__ -D__DTS__ -x assembler-with-cpp -o /home/jc/ls2a1000/pmon-loongson3-hj20004/zloader.ls2k-hj20004/LS2K-hj20004.dtb.i /home/jc/ls2a1000/pmon-loongson3-hj20004/zloader.ls2k-hj20004/../Targets/LS2K-hj20004/conf/LS2K-hj20004.dts
make[1]: Leaving directory '/home/jc/ls2a1000/pmon-loongson3-hj20004/Targets/LS2K-hj20004/compile/ls2k'
./dtc -I dts -O dtb -o LS2K-hj20004.dtb  LS2K-hj20004.dtb.i
[ -f gzrom.bin ] && cp gzrom.bin gzrom-dtb.bin && python ../tools/pmonenv.py -f gzrom-dtb.bin -d LS2K-hj20004.dtb -w  al=\(usb0,0\)/boot/vmlinuz al1=\(wd0,0\)/bspls2k.elf append="'console=ttyS0,115200 console=tty initcall_debug=1 loglevel=20'" FR=1 ifconfig=syn1:192.168.1.123
{'FR': '1', 'ifconfig': 'syn1:192.168.1.123', 'al': '(usb0,0)/boot/vmlinuz', 'append': "'console=ttyS0,115200 console=tty initcall_debug=1 loglevel=20'", 'al1': '(wd0,0)/bspls2k.elf'}
